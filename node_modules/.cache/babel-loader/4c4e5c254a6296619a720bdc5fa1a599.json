{"ast":null,"code":"var _jsxFileName = \"/home/zsn/\\u684C\\u9762/NOTE/jianshu/src/common/header/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { CSSTransition } from 'react-transition-group';\nimport { actionCreators } from './store';\nimport { HeaderWrapper, Logo, Nav, NavItem, NavSearch, SearchWrapper, Addition, Button, SearchInfo, SearchInfoTitle, SearchInfoSwitch, SearchInfoList, SearchInfoItem } from './style';\n\nclass Header extends Component {\n  getListArea() {\n    const {\n      focused,\n      list,\n      page,\n      totalPage,\n      mouseIn,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleChangePage\n    } = this.props;\n    const newList = list.toJS();\n    const pageList = [];\n\n    if (newList.length) {\n      for (let i = (page - 1) * 10; i < page * 10; i++) {\n        pageList.push( /*#__PURE__*/React.createElement(SearchInfoItem, {\n          key: newList[i],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 21\n          }\n        }, newList[i]));\n      }\n    }\n\n    if (focused || mouseIn) {\n      return /*#__PURE__*/React.createElement(SearchInfo, {\n        onMouseEnter: handleMouseEnter,\n        onMouseLeave: handleMouseLeave,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(SearchInfoTitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 33\n        }\n      }, \"\\u70ED\\u95E8\\u641C\\u7D22\", /*#__PURE__*/React.createElement(SearchInfoSwitch, {\n        onClick: () => handleChangePage(page, totalPage, this.spinicon),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        ref: icon => {\n          this.spinicon = icon;\n        },\n        className: \"spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 41\n        }\n      }, \"X\"), \"\\u6362\\u4E00\\u6279\")), /*#__PURE__*/React.createElement(SearchInfoList, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 33\n        }\n      }, pageList));\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    const {\n      focused,\n      handleInputFocus,\n      handleInputBlur\n    } = this.props;\n    return /*#__PURE__*/React.createElement(HeaderWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Logo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NavItem, {\n      className: \"left active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 25\n      }\n    }, \"\\u9996\\u9875\"), /*#__PURE__*/React.createElement(NavItem, {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 25\n      }\n    }, \"\\u4E0B\\u8F7DApp\"), /*#__PURE__*/React.createElement(NavItem, {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 25\n      }\n    }, \"\\u767B\\u5F55\"), /*#__PURE__*/React.createElement(NavItem, {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"iconfont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 52\n      }\n    }, \"\\uE636\")), /*#__PURE__*/React.createElement(SearchWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(CSSTransition, {\n      in: focused,\n      timeout: 200,\n      classNames: \"slide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(NavSearch, {\n      className: focused ? 'focused' : '',\n      onFocus: handleInputFocus,\n      onBlur: handleInputBlur,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"i\", {\n      className: focused ? 'focused iconfont' : 'iconfont',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 29\n      }\n    }, \"\\uE614\"), this.getListArea())), /*#__PURE__*/React.createElement(Addition, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"writting\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }, \"\\u5199\\u6587\\u7AE0\"), /*#__PURE__*/React.createElement(Button, {\n      className: \"reg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 25\n      }\n    }, \"\\u6CE8\\u518C\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    focused: state.getIn(['header', 'focused']),\n    list: state.getIn(['header', 'list']),\n    page: state.getIn(['header', 'page']),\n    totalPage: state.getIn(['header', 'totalPage']),\n    mouseIn: state.getIn(['header', 'mouseIn'])\n  };\n};\n\nconst mapDispathToProps = dispatch => {\n  return {\n    handleInputFocus() {\n      dispatch(actionCreators.getList());\n      dispatch(actionCreators.searchFocus());\n    },\n\n    handleInputBlur() {\n      dispatch(actionCreators.searchBlur());\n    },\n\n    handleMouseEnter() {\n      dispatch(actionCreators.mouseEnter());\n    },\n\n    handleMouseLeave() {\n      dispatch(actionCreators.mouseLeave());\n    },\n\n    handleChangePage(page, totalPage, spin) {\n      let originAngle = spin.style.transform.replace(/[^0-9]/ig, '');\n\n      if (originAngle) {\n        originAngle = parseInt(originAngle, 10);\n      } else {\n        originAngle = 0;\n      }\n\n      spin.style.transform = 'rotate(' + (originAngle + 360) + 'deg)';\n\n      if (page < totalPage) {\n        dispatch(actionCreators.changePage(page + 1));\n      } else {\n        dispatch(actionCreators.changePage(1));\n      }\n    }\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispathToProps)(Header);","map":{"version":3,"sources":["/home/zsn/桌面/NOTE/jianshu/src/common/header/index.js"],"names":["React","Component","connect","CSSTransition","actionCreators","HeaderWrapper","Logo","Nav","NavItem","NavSearch","SearchWrapper","Addition","Button","SearchInfo","SearchInfoTitle","SearchInfoSwitch","SearchInfoList","SearchInfoItem","Header","getListArea","focused","list","page","totalPage","mouseIn","handleMouseEnter","handleMouseLeave","handleChangePage","props","newList","toJS","pageList","length","i","push","spinicon","icon","render","handleInputFocus","handleInputBlur","mapStateToProps","state","getIn","mapDispathToProps","dispatch","getList","searchFocus","searchBlur","mouseEnter","mouseLeave","spin","originAngle","style","transform","replace","parseInt","changePage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport { actionCreators } from './store';\r\nimport { \r\n    HeaderWrapper,\r\n     Logo,\r\n     Nav,\r\n     NavItem,\r\n     NavSearch,\r\n     SearchWrapper,\r\n     Addition,\r\n     Button,\r\n     SearchInfo,\r\n     SearchInfoTitle,\r\n     SearchInfoSwitch,\r\n     SearchInfoList,\r\n     SearchInfoItem\r\n} from './style'\r\n\r\nclass Header extends Component {\r\n    getListArea() {\r\n        const { focused, list, page, totalPage, mouseIn, handleMouseEnter, handleMouseLeave, handleChangePage } = this.props;\r\n        const newList = list.toJS();\r\n        const pageList = [];\r\n        if (newList.length) {\r\n            for (let i = (page - 1) * 10; i < page * 10 ; i++ ) {\r\n                pageList.push(\r\n                    <SearchInfoItem key={newList[i]}>{newList[i]}</SearchInfoItem>\r\n                )\r\n            }\r\n        }\r\n        if (focused || mouseIn) {\r\n            return (\r\n                <SearchInfo \r\n                    onMouseEnter={handleMouseEnter}\r\n                    onMouseLeave={handleMouseLeave}\r\n                >\r\n                                <SearchInfoTitle>\r\n                                    热门搜索\r\n                                    <SearchInfoSwitch onClick={() => handleChangePage(page, totalPage, this.spinicon)}>\r\n                                        <i ref={(icon) => {this.spinicon = icon}} className=\"spin\">X</i>\r\n                                        换一批</SearchInfoSwitch>\r\n                                </SearchInfoTitle>\r\n                                <SearchInfoList>\r\n                                    {pageList}\r\n                                </SearchInfoList>\r\n                            </SearchInfo>\r\n            )\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    render() {\r\n        const { focused, handleInputFocus, handleInputBlur } = this.props\r\n        return (\r\n            <HeaderWrapper>\r\n                    <Logo/>\r\n                    <Nav>\r\n                        <NavItem className=\"left active\">首页</NavItem>\r\n                        <NavItem className=\"left\">下载App</NavItem>\r\n                        <NavItem className=\"right\">登录</NavItem>\r\n                        <NavItem className=\"right\"><i className=\"iconfont\">&#xe636;</i></NavItem>\r\n                        <SearchWrapper>\r\n                            <CSSTransition\r\n                                in={focused}\r\n                                timeout={200}\r\n                                classNames=\"slide\"\r\n                            >\r\n                                <NavSearch\r\n                                    className={focused ? 'focused' : ''}\r\n                                    onFocus={handleInputFocus}\r\n                                    onBlur={handleInputBlur}\r\n                                ></NavSearch>\r\n                            </CSSTransition>\r\n                            <i className={focused ? 'focused iconfont' : 'iconfont'}>&#xe614;</i>\r\n                            { this.getListArea() }\r\n                        </SearchWrapper>\r\n                    </Nav>\r\n                    <Addition>\r\n                        <Button className='writting'>写文章</Button>\r\n                        <Button className='reg'>注册</Button>\r\n                    </Addition>\r\n                </HeaderWrapper>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        focused: state.getIn(['header', 'focused']),\r\n        list: state.getIn(['header', 'list']),\r\n        page: state.getIn(['header', 'page']),\r\n        totalPage: state.getIn(['header', 'totalPage']),\r\n        mouseIn: state.getIn(['header', 'mouseIn'])\r\n    }\r\n}\r\n\r\nconst mapDispathToProps = (dispatch) => {\r\n    return {\r\n        handleInputFocus() {\r\n            dispatch(actionCreators.getList())\r\n            dispatch(actionCreators.searchFocus());\r\n        },\r\n        handleInputBlur() {\r\n            dispatch(actionCreators.searchBlur());\r\n        },\r\n        handleMouseEnter() {\r\n            dispatch(actionCreators.mouseEnter());\r\n        },\r\n        handleMouseLeave() {\r\n            dispatch(actionCreators.mouseLeave());\r\n        },\r\n        handleChangePage(page, totalPage, spin) {\r\n            let originAngle = spin.style.transform.replace(/[^0-9]/ig, '');\r\n\t\t\tif (originAngle) {\r\n\t\t\t\toriginAngle = parseInt(originAngle, 10);\r\n\t\t\t}else {\r\n\t\t\t\toriginAngle = 0;\r\n\t\t\t}\r\n\t\t\tspin.style.transform = 'rotate(' + (originAngle + 360) + 'deg)';\r\n            if (page < totalPage) {\r\n                dispatch(actionCreators.changePage(page + 1));\r\n            } else {\r\n                dispatch(actionCreators.changePage(1));\r\n            }\r\n        },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispathToProps)(Header);"]},"metadata":{},"sourceType":"module"}